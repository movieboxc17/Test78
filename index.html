<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced File Processing Tools</title>
    <style>
        /* CSS styles here */
        /* ... (your existing styles) ... */
    </style>
</head>
<body>
    <header>
        <h1>Advanced File Processing Tools</h1>
    </header>
    <main>
        <input type="file" id="fileInput" accept=".txt, .jpg, .jpeg, .png, .wav, .mp3, .pdf, .mp4, .avi, .csv, .json">
        <label for="toolSelect">Select a Tool:</label>
        <select id="toolSelect">
            <option value="display">Display File</option>
            <option value="analyzeText">Text Analysis</option>
            <option value="manipulateImage">Image Manipulation</option>
            <option value="processAudio">Audio Processing</option>
            <option value="generatePDF">Generate PDF</option>
            <option value="compressFile">File Compression</option>
            <option value="visualizeData">Data Visualization</option>
            <option value="analyzeJSON">JSON Data Analysis</option>
            <option value="processVideo">Video Processing</option>
            <option value="visualizeGeospatial">Geospatial Data Visualization</option>
            <option value="convertDocument">Document Conversion</option>
            <option value="encryptDecrypt">Encryption/Decryption</option>
            <option value="codeEditor">Code Editor</option>
        </select>
        <button id="processButton">Process File</button>
        <!-- Add a download button -->
        <button id="downloadButton" style="display: none;">Download Processed File</button>
        <div id="output"></div>
    </main>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const fileInput = document.getElementById("fileInput");
            const toolSelect = document.getElementById("toolSelect");
            const processButton = document.getElementById("processButton");
            const downloadButton = document.getElementById("downloadButton");
            const outputDiv = document.getElementById("output");

            processButton.addEventListener("click", function () {
                const file = fileInput.files[0];
                const selectedTool = toolSelect.value;

                if (file) {
                    const reader = new FileReader();

                    reader.onload = function (e) {
                        const fileContent = e.target.result;
                        const fileType = file.type;

                        if (selectedTool === "display") {
                            // ... (your existing code) ...
                        } else if (selectedTool === "analyzeText" && fileType.includes("text")) {
                            // ... (your existing code) ...
                        } else if (selectedTool === "manipulateImage" && fileType.includes("image")) {
                            // ... (your existing code) ...
                        } else if (selectedTool === "processAudio" && fileType.includes("audio")) {
                            // ... (your existing code) ...
                        } else if (selectedTool === "generatePDF" && fileType.includes("text")) {
                            // ... (your existing code) ...
                        } else if (selectedTool === "compressFile") {
                            // ... (your existing code) ...
                        } else if (selectedTool === "visualizeData" && fileType.includes("text")) {
                            // ... (your existing code) ...
                        } else if (selectedTool === "analyzeJSON" && fileType.includes("json")) {
                            // ... (your existing code) ...
                        } else if (selectedTool === "processVideo" && (fileType.includes("mp4") || fileType.includes("avi"))) {
                            // ... (your existing code) ...
                        } else if (selectedTool === "visualizeGeospatial" && fileType.includes("csv")) {
                            // ... (your existing code) ...
                        } else if (selectedTool === "convertDocument") {
                            // ... (your existing code) ...
                        } else if (selectedTool === "encryptDecrypt" && fileType.includes("text")) {
                            // ... (your existing code) ...
                        } else if (selectedTool === "codeEditor" && (fileType.includes("text") || fileType.includes("javascript") || fileType.includes("python"))) {
                            // ... (your existing code) ...
                        } else {
                            outputDiv.textContent = "Unsupported tool or file type.";
                        }

                        // Enable the download button and set the processed content for download
                        downloadButton.style.display = "block";
                        downloadButton.addEventListener("click", function () {
                            const processedBlob = new Blob([fileContent], { type: fileType });
                            const downloadLink = document.createElement("a");
                            downloadLink.href = URL.createObjectURL(processedBlob);
                            downloadLink.download = "processed_file" + getFileExtension(file.name);
                            downloadLink.click();
                        });
                    };

                    if (fileType.includes("text") || fileType.includes("image") || fileType.includes("audio") || fileType === "application/pdf" || fileType.includes("json") || fileType.includes("mp4") || fileType.includes("avi") || fileType.includes("csv")) {
                        reader.readAsDataURL(file);
                    } else {
                        outputDiv.textContent = "Unsupported file type.";
                    }
                } else {
                    outputDiv.textContent = "Please select a file.";
                }
            });

            // Helper function to get file extension
            function getFileExtension(filename) {
                return filename.slice(((filename.lastIndexOf(".") - 1) >>> 0) + 2);
            }
        });
    </script>
</body>
</html>
